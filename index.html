<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="">
        <label for="cityname">City:</label>
        <input type="text" id="cityname">
    </form>
    <button id="getData">Get data</button>
    <div id="weather">
        <div id="description"></div>
        <h1 id="temp"></h1>
        <div id="location"></div>
    </div>

    <script>
        //const apiText = "https://jsonplaceholder.typicode.com/posts";
        
        document.getElementById("getData").addEventListener("click", getData);
        
        function getData (city) {
            let cityName = document.getElementById("cityname").value;
            const apiUrl = "https://api.openweathermap.org/data/2.5/weather?q=" +cityName+"&appid=e8e4f12614f876a3e81e6a3ad90c4b37&mode=json&units=metric&lang=sv";

            fetch(apiUrl)
            .then(function(response) {
                return response.json()
            })
            .then(function(data) {
                console.log(data);
                weatherOutput(data);
            }) 
        }

        function weatherOutput (output) {
            //let celsius = Math.round(parseFloat(output.main.temp)-273.15);

            document.getElementById("description").innerHTML = output.weather[0].description;
            document.getElementById("temp").innerHTML = output.main.temp.toFixed(1) + "&deg;";
            document.getElementById("location").innerHTML = output.name;

        }
    </script>
</body>
</html>